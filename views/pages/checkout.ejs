<%- include('../partials/header')%>

<style>
  .text-sm{
    color: white;
  }
</style>
<body class="bg-gradient-to-br from-gray-900 via-black to-gray-900 text-gray-100 font-sans">
  <%- include('../partials/flash')%>

  <!-- Navbar -->

  <!-- Checkout Section -->
  <section class="container mx-auto px-6 py-12 grid md:grid-cols-2 gap-10">
    
    <!-- Left: Form -->
    <form action="/checkout" method="POST" 
          class="bg-gray-800/90 backdrop-blur rounded-2xl p-8 shadow-xl border border-gray-700 
                 hover:shadow-yellow-500/20 transition transform hover:-translate-y-1 hover:scale-[1.01] duration-300">
      <h2 class="text-3xl font-bold text-yellow-400 mb-6 flex items-center gap-2 animate-fade-in-down">
        <i class="fa-solid fa-truck-fast animate-pulse"></i> Shipping Details
      </h2>

      <div class="space-y-4">
        <div class="animate-fade-in">
          <label class="block text-sm mb-1">Full Name</label>
          <input type="text" name="fullName" required 
                 class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-white focus:ring-2 focus:ring-yellow-400 transition">
        </div>

        <div class="animate-fade-in delay-100">
          <label class="block text-sm mb-1">Address</label>
          <textarea name="address" required rows="3" 
                    class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-white focus:ring-2 focus:ring-yellow-400 transition"></textarea>
        </div>

        <div class="grid grid-cols-2 gap-4 animate-fade-in delay-200">
          <div>
            <label class="block text-sm mb-1">City</label>
            <input type="text" name="city" required 
                   class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-white focus:ring-2 focus:ring-yellow-400 transition">
          </div>
          <div>
            <label class="block text-sm mb-1">Postal Code</label>
            <input type="text" name="postalCode" required 
                   class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-white focus:ring-2 focus:ring-yellow-400 transition">
          </div>
        </div>

        <div class="animate-fade-in delay-300">
          <label class="block text-sm mb-1">Country</label>
          <input type="text" name="country" required 
                 class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-white focus:ring-2 focus:ring-yellow-400 transition">
        </div>

        <div class="animate-fade-in delay-400">
          <label class="block text-sm mb-1">Payment Method</label>
          <select name="payment" 
                  class="w-full p-3 rounded-lg bg-gray-900 border border-gray-700 text-white focus:ring-2 focus:ring-yellow-400 transition">
            <option value="COD">Cash on Delivery</option>
            <option value="Card">Credit/Debit Card</option>
            <option value="BankTransfer">Bank Transfer</option>
          </select>
        </div>
      </div>

      <button type="submit" 
              class="mt-6 w-full py-3 bg-yellow-500 hover:bg-yellow-600 rounded-xl text-lg font-bold text-black shadow-lg transition transform hover:scale-105 active:scale-95 duration-300 flex items-center justify-center">
        Place Order <i class="fa-solid fa-check ml-2 animate-pulse"></i>
      </button>
    </form>

    <!-- Right: Order Summary -->
    <div class="bg-gray-800/90 backdrop-blur rounded-2xl p-8 shadow-xl border border-gray-700 
                animate-fade-in-up hover:shadow-yellow-500/20 transition transform hover:-translate-y-1 hover:scale-[1.01] duration-300">
      <h2 class="text-3xl font-bold text-yellow-400 mb-6 flex items-center gap-2">
        <i class="fa-solid fa-clipboard-list animate-pulse"></i> Order Summary
      </h2>

      <div class="space-y-3 text-gray-300">
        <% if (cart.items.length > 0) { %>
          <% cart.items.forEach(item => { %>
            <div class="flex justify-between border-b border-gray-700 pb-2 animate-fade-in">
              <span><%= item.productId.name %> Ã— <%= item.quantity %></span>
              <span class="text-yellow-300">Rs <%= item.productId.price * item.quantity %></span>
            </div>
          <% }) %>

          <div class="mt-4 space-y-2 animate-fade-in delay-200">
            <div class="flex justify-between">
              <span>Subtotal</span>
              <span>Rs <%= cart.items.reduce((acc, i) => acc + i.productId.price * i.quantity, 0) %></span>
            </div>
            <div class="flex justify-between">
              <span>Delivery</span>
              <span>Rs 200</span>
            </div>
            <div class="flex justify-between">
              <span>Tax</span>
              <span>Rs 50</span>
            </div>
            <hr class="border-gray-700">
            <div class="flex justify-between font-bold text-xl text-yellow-400">
              <span>Total</span>
              <span>
                Rs <%= cart.items.reduce((acc, i) => acc + i.productId.price * i.quantity, 0) + 250 %>
              </span>
            </div>
          </div>
        <% } else { %>
          <p class="text-gray-400 animate-pulse">Your cart is empty.</p>
        <% } %>
      </div>
    </div>
  </section>

  <%- include('../partials/footer')%>

  <!-- Custom Animations -->
  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in { animation: fadeIn 0.8s ease forwards; }
    .animate-fade-in-down { animation: fadeIn 1s ease forwards; transform: translateY(-10px); }
    .animate-fade-in-up { animation: fadeIn 1s ease forwards; transform: translateY(10px); }
    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    .delay-400 { animation-delay: 0.4s; }
  </style>
</body>
